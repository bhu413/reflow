(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{326:function(e,t,a){},355:function(e,t,a){},507:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(21),r=a.n(s),c=(a(326),a(10)),o=a(11),l=a(8),d=a(15),h=a(14),j=a(266),u=a.n(j).a.connect(),b=i.a.createContext(),p=(a(355),a(581)),O=a(569),f=a(579),x=a(150),m=(a(445),a(1));a(251);var g=a(555),v=a(190),y=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).dragStart=n.dragStart.bind(Object(l.a)(n)),n.drag=n.drag.bind(Object(l.a)(n)),n.dragEnd=n.dragEnd.bind(Object(l.a)(n)),n.state={hitRadius:1,pointRadius:3},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.props.draggable&&this.setState({hitRadius:30,pointRadius:8})}},{key:"dragStart",value:function(e,t,a,n){this.props.dragStart(e,t,a,n)}},{key:"drag",value:function(e,t,a,n){this.props.drag(e,t,a,n)}},{key:"dragEnd",value:function(e,t,a,n){this.props.dragEnd(e,t,a,n)}},{key:"render",value:function(){var e=this,t=this.props.theme.palette.text.hint,a=this.props.theme.palette.primary.main,n=Object(v.alpha)(this.props.theme.palette.primary.main,.2),i=this.props.theme.palette.secondary.main,s=Object(v.alpha)(this.props.theme.palette.secondary.main,.2),r=new Array(10).fill(n);return this.props.draggable&&(r[this.props.activePoint]=i),Object(m.jsx)(x.b,{data:{datasets:[{label:"Profile",data:this.props.profile.datapoints,pointBackgroundColor:r,showLine:!0,lineTension:.05,backgroundColor:n,borderColor:a,borderWidth:3,pointRadius:this.state.pointRadius,hoverRadius:this.state.pointRadius+3,dragData:this.props.draggable},{label:"Historic Temerature",data:this.props.historicTemps,showLine:!0,lineTension:.05,backgroundColor:s,borderColor:i,borderWidth:1,pointRadius:3,hoverRadius:4,dragData:!1,borderDash:[10,5],fill:0}]},options:{maintainAspectRatio:!0,aspectRatio:1.9,responsive:!0,pointHitRadius:this.state.hitRadius,animation:{duration:0},scales:{y:{grid:{color:t},ticks:{color:t},min:0,max:300,stepSize:1,title:{text:"Temperature (\xb0C)",display:!0,color:a,font:{size:"20%"}}},x:{grid:{color:t},ticks:{color:t},min:0,max:this.props.maxTime,stepSize:1,title:{text:"Time (Seconds)",display:!0,color:a,font:{size:"20%"}}}},plugins:{dragData:{round:0,dragX:!0,onDrag:function(t,a,n,i){return e.drag(t,a,n,i)},onDragStart:function(t,a,n,i){return e.dragStart(t,a,n,i)},onDragEnd:function(t,a,n,i){return e.dragEnd(t,a,n,i)}},zoom:{wheel:{enabled:!0},pinch:{enabled:!0},mode:"xy"},tooltip:{xAlign:"right",yAlign:"bottom",displayColors:!1,caretPadding:30,caretSize:10,bodySpacing:20},legend:{display:!1},title:{display:!1,color:"white",fullsize:!0,position:"bottom",align:"start",text:this.props.profile.name,padding:{top:0,bottom:0},font:{size:30}}}}})}}]),a}(n.Component),C=Object(g.a)(y),k=a(112),P=a.n(k),S=a(94),w=a(568),D=a(560),T=a(577),_=a(152),M=a(96),I=a(47),L=a(24),R=a.n(L),N=a(273),F=a.n(N),E=a(145),W=a.n(E),X=a(562),Y=a(563),A=a(95),z=a(192),B=a.n(z),q=a(270),H=a.n(q),U=a(271),J=a.n(U),G=a(272),K=a.n(G),Q=a(191),V=a.n(Q),Z=a(144),$=a.n(Z),ee=a(582),te=a(578),ae=a(558),ne=a(559),ie=a(561),se=a(583),re=a(513),ce=a(514),oe=a(565),le=a(566),de=a(564),he=a(6),je=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).StopButton=Object(he.a)({root:{backgroundColor:"#bf0000","&:hover":{backgroundColor:"#870000"}}})(S.a),n.componentDidMount=n.componentDidMount.bind(Object(l.a)(n)),n.componentWillUnmount=n.componentWillUnmount.bind(Object(l.a)(n)),n.drawerChange=n.drawerChange.bind(Object(l.a)(n)),n.stop=n.stop.bind(Object(l.a)(n)),n.qrClicked=n.qrClicked.bind(Object(l.a)(n)),n.qrClosed=n.qrClosed.bind(Object(l.a)(n)),n.snackbarClosed=n.snackbarClosed.bind(Object(l.a)(n)),n.state={drawer:!1,qrDialog:!1,thermoDialog:!1,percentage:0,temperature:0,status:"Ready",address:"",currentProfile:"",serverMessage:"",serverMessageSeverity:"",serverMessageSnackbar:!1},n}return Object(o.a)(a,[{key:"stop",value:function(){var e=this;R.a.post("/api/stop",{reason:"test"}).then((function(t){200===t.data.status&&e.setState({status:"Ready"})}))}},{key:"componentDidMount",value:function(){var e=this;fetch("/api/status").then((function(e){return e.json()})).then((function(t){e.setState({address:t.address,percentage:t.status.percent,status:t.status.status,currentProfile:t.status.current_profile})})),u.on("status_update",(function(t){e.setState({percentage:t.percent,temperature:t.temperature,status:t.status,currentProfile:t.current_profile})})),u.on("server_message",(function(t){e.setState({serverMessage:t.message,serverMessageSeverity:t.severity}),e.setState({serverMessageSnackbar:!0})}))}},{key:"drawerChange",value:function(){this.state.drawer?this.setState({drawer:!1}):this.setState({drawer:!0})}},{key:"componentWillUnmount",value:function(){u.off("status_update"),u.off("server_message")}},{key:"qrClicked",value:function(){this.setState({qrDialog:!0})}},{key:"qrClosed",value:function(){this.setState({qrDialog:!1})}},{key:"snackbarClosed",value:function(){this.setState({serverMessageSnackbar:!1})}},{key:"render",value:function(){var e=this.state.temperature+"\xb0C";return-1===this.state.temperature?e="Thermocouple Disconnected!":-2===this.state.temperature&&(e="Thermocouple Error!"),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(ee.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:this.state.serverMessageSnackbar,autoHideDuration:2e4,children:Object(m.jsx)(te.a,{elevation:6,variant:"filled",severity:this.state.serverMessageSeverity,onClose:this.snackbarClosed,children:this.state.serverMessage})}),Object(m.jsxs)(ae.a,{onClose:this.qrClosed,open:this.state.qrDialog,fullWidth:!1,maxWidth:"sm",children:[Object(m.jsx)(ne.a,{children:Object(m.jsx)(D.a,{container:!0,justifyContent:"center",children:Object(m.jsx)(D.a,{item:!0,children:Object(m.jsxs)(M.a,{variant:"h5",children:["http://",this.state.address]})})})}),Object(m.jsx)(ie.a,{children:Object(m.jsxs)(D.a,{container:!0,alignItems:"center",direction:"column",children:[Object(m.jsx)(D.a,{item:!0,children:Object(m.jsx)(V.a,{value:"http://"+this.state.address,size:200})}),Object(m.jsx)(D.a,{item:!0,children:Object(m.jsx)(A.a,{"aria-label":"close",onClick:this.qrClosed,children:Object(m.jsx)($.a,{})})})]})})]}),Object(m.jsxs)(X.a,{position:"static",children:[Object(m.jsxs)(Y.a,{children:[Object(m.jsx)(A.a,{edge:"start",color:"inherit","aria-label":"menu",onClick:this.drawerChange,children:Object(m.jsx)(B.a,{})}),Object(m.jsxs)(D.a,{container:!0,spacing:5,style:{paddingLeft:20},children:[Object(m.jsx)(D.a,{item:!0,children:Object(m.jsx)(V.a,{style:{cursor:"pointer"},onClick:this.qrClicked,value:"http://"+this.state.address+":3001",size:25})}),Object(m.jsx)(D.a,{item:!0,xs:2,children:Object(m.jsx)(M.a,{children:e})}),Object(m.jsx)(D.a,{item:!0,children:Object(m.jsx)(M.a,{children:this.state.status})}),Object(m.jsx)(D.a,{item:!0,children:Object(m.jsx)(M.a,{children:this.state.currentProfile.name})})]}),Object(m.jsx)("div",{style:{marginLeft:"auto"},children:("Preheat"===this.state.status||"Running"===this.state.status)&&Object(m.jsx)(this.StopButton,{onClick:this.stop,startIcon:Object(m.jsx)(W.a,{}),variant:"contained",color:"secondary",children:"Stop"})})]}),Object(m.jsx)(de.a,{style:{height:5},variant:"determinate",color:"secondary",value:this.state.percentage})]}),Object(m.jsxs)(se.a,{open:this.state.drawer,onClose:this.drawerChange,children:[Object(m.jsx)(re.a,{button:!0,onClick:this.drawerChange,children:Object(m.jsx)(ce.a,{children:Object(m.jsx)(B.a,{})})},"menu"),Object(m.jsx)(oe.a,{}),Object(m.jsxs)(re.a,{button:!0,component:I.b,onClick:this.drawerChange,to:"/",children:[Object(m.jsx)(ce.a,{children:Object(m.jsx)(H.a,{})}),Object(m.jsx)(le.a,{children:"Home"})]},"Home"),Object(m.jsxs)(re.a,{button:!0,component:I.b,onClick:this.drawerChange,to:"/profileList",children:[Object(m.jsx)(ce.a,{children:Object(m.jsx)(J.a,{})}),Object(m.jsx)(le.a,{children:"Profile List"})]},"ProfileList"),Object(m.jsxs)(re.a,{button:!0,component:I.b,onClick:this.drawerChange,to:"/settings",children:[Object(m.jsx)(ce.a,{children:Object(m.jsx)(K.a,{})}),Object(m.jsx)(le.a,{children:"Settings"})]},"Settings")]})]})}}]),a}(n.Component),ue=a(567),be=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).steps=[{label:"Ready"},{label:"Preheat",description:""},{label:"Run Profile",description:""},{label:"Cooling",description:""}],n.StartButton=Object(he.a)({root:{backgroundColor:"#00ba16","&:hover":{backgroundColor:"#009612"}}})(S.a),n.StopButton=Object(he.a)({root:{backgroundColor:"#bf0000","&:hover":{backgroundColor:"#870000"}}})(S.a),n.runProfile=n.runProfile.bind(Object(l.a)(n)),n.forceRunProfile=n.forceRunProfile.bind(Object(l.a)(n)),n.stop=n.stop.bind(Object(l.a)(n)),n.cancelClicked=n.cancelClicked.bind(Object(l.a)(n)),n.state={currentProfile:{name:"flat",date_created:0,last_run:0,datapoints:[{x:0,y:30},{x:75,y:30},{x:150,y:30},{x:225,y:30},{x:300,y:30},{x:375,y:30}]},historicTemperature:[],percentDone:0,status:"Ready",activeStep:0,startWhenCoolingDialog:!1},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("/api/current_profile").then((function(e){return e.json()})).then((function(t){e.setState({currentProfile:t.current_profile})})),u.on("status_update",(function(t){e.setState({currentProfile:t.current_profile,historicTemperature:t.historic_temperature,status:t.status}),"Ready"===e.state.status?e.setState({activeStep:0}):"Preheat"===e.state.status?e.setState({activeStep:1}):"Running"===e.state.status?e.setState({activeStep:2}):"Cooling"===e.state.status&&e.setState({activeStep:3})}))}},{key:"shouldComponentUpdate",value:function(e){return!0}},{key:"componentWillUnmount",value:function(){u.off("status_update")}},{key:"runProfile",value:function(){var e=this;R.a.post("/api/run",{override:!1}).then((function(t){200===t.data.status?e.setState({status:"Running"}):409===t.data.status&&e.setState({startWhenCoolingDialog:!0})}))}},{key:"forceRunProfile",value:function(){var e=this;R.a.post("/api/run",{override:!0}).then((function(t){200===t.data.status&&e.setState({status:"Running",startWhenCoolingDialog:!1})}))}},{key:"stop",value:function(){var e=this;R.a.post("/api/stop",{reason:"test"}).then((function(t){200===t.data.status&&e.setState({status:"Ready"})}))}},{key:"cancelClicked",value:function(){this.setState({startWhenCoolingDialog:!1})}},{key:"render",value:function(){var e;return e="Preheat"===this.state.status||"Running"===this.state.status?Object(m.jsx)(this.StopButton,{onClick:this.stop,startIcon:Object(m.jsx)(W.a,{}),variant:"contained",color:"secondary",children:"Stop"}):Object(m.jsx)(this.StartButton,{onClick:this.runProfile,startIcon:Object(m.jsx)(F.a,{}),variant:"contained",color:"primary",children:"Start"}),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(je,{}),Object(m.jsxs)(ae.a,{open:this.state.startWhenCoolingDialog,onClose:this.cancelClicked,children:[Object(m.jsx)(ne.a,{children:"Oven still cooling"}),Object(m.jsx)(ie.a,{children:"Start profile anyway?"}),Object(m.jsxs)(ue.a,{children:[Object(m.jsx)(S.a,{onClick:this.cancelClicked,color:"primary",children:"Cancel"}),Object(m.jsx)(S.a,{onClick:this.forceRunProfile,color:"primary",autoFocus:!0,children:"Start Anyway"})]})]}),Object(m.jsxs)(w.a,{maxWidth:!1,children:[Object(m.jsxs)(D.a,{container:!0,children:[Object(m.jsx)(D.a,{item:!0,sm:2,children:Object(m.jsx)(T.a,{sx:{paddingTop:20},children:Object(m.jsx)(_.a,{children:Object(m.jsx)(p.a,{activeStep:this.state.activeStep,orientation:"vertical",square:!1,children:this.steps.map((function(e,t){return Object(m.jsx)(O.a,{children:Object(m.jsx)(f.a,{children:Object(m.jsx)(M.a,{variant:"subtitle2",align:"left",children:e.label})})},e.label)}))})})})}),Object(m.jsx)(D.a,{item:!0,sm:10,children:Object(m.jsx)("div",{style:{paddingTop:"20px",width:"94%",margin:"0 0 0 auto"},children:Object(m.jsx)(C,{draggable:!1,profile:this.state.currentProfile,historicTemps:this.state.historicTemperature})})})]}),Object(m.jsxs)(D.a,{container:!0,spacing:3,alignItems:"center",justifyContent:"space-between",style:{paddingTop:"15px"},children:[Object(m.jsx)(D.a,{item:!0,xs:6,children:Object(m.jsx)(_.a,{style:{padding:"6px 7px 6px 10px"},children:Object(m.jsxs)(M.a,{children:["Profile: ",this.state.currentProfile.name]})})}),Object(m.jsx)(D.a,{item:!0,children:Object(m.jsxs)(D.a,{container:!0,spacing:3,children:[Object(m.jsx)(D.a,{item:!0,children:Object(m.jsx)(S.a,{component:I.b,to:{pathname:"/editProfile",state:{profile:this.state.currentProfile}},startIcon:Object(m.jsx)(P.a,{}),variant:"contained",color:"primary",children:"Edit Current Profile"})}),Object(m.jsx)(D.a,{item:!0,children:e})]})})]})]})]})}}]),a}(n.Component),pe=a(580),Oe=a(571),fe=a(570),xe=a(83),me=a.n(xe),ge=a(202),ve=a(515),ye=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).state={port:3001,remoteConnections:!0,messageToSend:"",inputChanged:!1},e.save=e.save.bind(Object(l.a)(e)),e.handleSwitch=e.handleSwitch.bind(Object(l.a)(e)),e.handlePortChange=e.handlePortChange.bind(Object(l.a)(e)),e.handleMessageChange=e.handleMessageChange.bind(Object(l.a)(e)),e.sendMessage=e.sendMessage.bind(Object(l.a)(e)),e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("/api/settings/network").then((function(e){return e.json()})).then((function(t){e.setState({port:t.port,remoteConnections:t.remote_connections})}))}},{key:"save",value:function(){var e=this,t={};t.port=this.state.port,t.remote_connections=this.state.remoteConnections,R.a.post("/api/settings/network",t).then((function(t){200===t.data.status&&e.setState({inputChanged:!1})}))}},{key:"handleSwitch",value:function(e){this.setState({remoteConnections:e.target.checked,inputChanged:!0})}},{key:"handlePortChange",value:function(e){this.setState({port:e.target.value,inputChanged:!0})}},{key:"handleMessageChange",value:function(e){this.setState({messageToSend:e.target.value})}},{key:"sendMessage",value:function(){R.a.post("/api/send_message",{message:this.state.messageToSend}).then((function(e){}))}},{key:"render",value:function(){return Object(m.jsxs)(pe.a,{children:[Object(m.jsx)(fe.a,{expandIcon:Object(m.jsx)(me.a,{}),"aria-controls":"panel1bh-content",id:"panel1bh-header",children:Object(m.jsx)(M.a,{variant:"h6",children:"Network"})}),Object(m.jsx)(Oe.a,{children:Object(m.jsxs)(D.a,{container:!0,direction:"column",alignItems:"flex-start",spacing:3,children:[Object(m.jsxs)(D.a,{item:!0,children:[Object(m.jsx)(M.a,{align:"left",children:"Server Port"}),Object(m.jsx)(ge.a,{variant:"outlined",type:"number",onChange:this.handlePortChange,value:this.state.port})]}),Object(m.jsxs)(D.a,{item:!0,children:[Object(m.jsx)(M.a,{align:"left",children:"Allow Remote Connections (not implemented yet)"}),Object(m.jsx)(ve.a,{checked:this.state.remoteConnections,onChange:this.handleSwitch,color:"primary"})]}),Object(m.jsxs)(D.a,{item:!0,children:[Object(m.jsx)(M.a,{align:"left",children:"Send message to all connections"}),Object(m.jsx)(ge.a,{variant:"outlined",onChange:this.handleMessageChange,value:this.state.messageToSend}),Object(m.jsx)(S.a,{variant:"contained",color:"primary",onClick:this.sendMessage,children:"Send"})]}),Object(m.jsxs)(D.a,{container:!0,justifyContent:"flex-end",spacing:3,children:[Object(m.jsx)(D.a,{item:!0,children:Object(m.jsx)(M.a,{variant:"caption",children:"Changes will be applied after a manual restart of the server."})}),Object(m.jsx)(D.a,{item:!0,children:Object(m.jsx)(S.a,{variant:"contained",color:"primary",disabled:!this.state.inputChanged,onClick:this.save,children:"Save"})})]})]})})]})}}]),a}(n.Component),Ce=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).state={p:0,i:0,d:0,lookAhead:0,preheat:!1,preheatPower:0,inputChanged:!1},e.save=e.save.bind(Object(l.a)(e)),e.handlePChange=e.handlePChange.bind(Object(l.a)(e)),e.handleIChange=e.handleIChange.bind(Object(l.a)(e)),e.handleDChange=e.handleDChange.bind(Object(l.a)(e)),e.handlePreheatChange=e.handlePreheatChange.bind(Object(l.a)(e)),e.handleLookAheadChange=e.handleLookAheadChange.bind(Object(l.a)(e)),e.handlePreheatPowerChange=e.handlePreheatPowerChange.bind(Object(l.a)(e)),e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("/api/settings/pid").then((function(e){return e.json()})).then((function(t){e.setState({p:t.p,i:t.i,d:t.d,lookAhead:t.look_ahead,preheat:t.preheat,preheatPower:t.preheat_power})}))}},{key:"save",value:function(){var e=this,t={};t.p=this.state.p,t.i=this.state.i,t.d=this.state.d,t.look_ahead=this.state.lookAhead,t.preheat=this.state.preheat,t.preheat_power=this.state.preheatPower,R.a.post("/api/settings/pid",t).then((function(t){200===t.data.status&&e.setState({inputChanged:!1})}))}},{key:"handlePChange",value:function(e){this.setState({p:e.target.value,inputChanged:!0})}},{key:"handleIChange",value:function(e){this.setState({i:e.target.value,inputChanged:!0})}},{key:"handleDChange",value:function(e){this.setState({d:e.target.value,inputChanged:!0})}},{key:"handleLookAheadChange",value:function(e){e.target.value>=0&&this.setState({lookAhead:e.target.value,inputChanged:!0})}},{key:"handlePreheatChange",value:function(e){this.setState({preheat:e.target.checked,inputChanged:!0})}},{key:"handlePreheatPowerChange",value:function(e){e.target.value>=0&&e.target.value<=1&&this.setState({preheatPower:e.target.value,inputChanged:!0})}},{key:"render",value:function(){return Object(m.jsxs)(pe.a,{children:[Object(m.jsx)(fe.a,{expandIcon:Object(m.jsx)(me.a,{}),"aria-controls":"panel2bh-content",id:"panel2bh-header",children:Object(m.jsx)(M.a,{variant:"h6",children:"PID"})}),Object(m.jsx)(Oe.a,{children:Object(m.jsxs)(D.a,{container:!0,spacing:3,direction:"column",alignItems:"flex-start",children:[Object(m.jsx)(D.a,{item:!0,children:Object(m.jsxs)(D.a,{container:!0,spacing:2,children:[Object(m.jsx)(D.a,{item:!0,children:Object(m.jsx)(ge.a,{variant:"outlined",type:"number",label:"Proportional",value:this.state.p,onChange:this.handlePChange})}),Object(m.jsx)(D.a,{item:!0,children:Object(m.jsx)(ge.a,{variant:"outlined",type:"number",label:"Integral",value:this.state.i,onChange:this.handleIChange})}),Object(m.jsx)(D.a,{item:!0,children:Object(m.jsx)(ge.a,{variant:"outlined",type:"number",label:"Derivative",value:this.state.d,onChange:this.handleDChange})})]})}),Object(m.jsxs)(D.a,{item:!0,children:[Object(m.jsx)(M.a,{align:"left",children:"Look Ahead (seconds)"}),Object(m.jsx)(ge.a,{variant:"outlined",type:"number",value:this.state.lookAhead,onChange:this.handleLookAheadChange})]}),Object(m.jsx)(D.a,{item:!0,children:Object(m.jsxs)(D.a,{container:!0,spacing:3,children:[Object(m.jsxs)(D.a,{item:!0,children:[Object(m.jsx)(M.a,{align:"left",children:"Enable Preheat"}),Object(m.jsx)(ve.a,{checked:this.state.preheat,onChange:this.handlePreheatChange,color:"primary"})]}),Object(m.jsx)(D.a,{item:!0,children:Object(m.jsx)(ge.a,{variant:"outlined",type:"number",label:"Preheat Power",value:this.state.preheatPower,onChange:this.handlePreheatPowerChange})})]})}),Object(m.jsx)(D.a,{container:!0,justifyContent:"flex-end",spacing:3,children:Object(m.jsx)(D.a,{item:!0,children:Object(m.jsx)(S.a,{variant:"contained",color:"primary",disabled:!this.state.inputChanged,onClick:this.save,children:"Save"})})})]})})]})}}]),a}(n.Component),ke=a(204),Pe=a(71),Se=a(114),we=a(153),De=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).state={relayPin:5,fanPin:6,inputChanged:!1,relayError:!1,fanError:!1,fanTurnoffTemp:0},e.handleRelayChange=e.handleRelayChange.bind(Object(l.a)(e)),e.handleFanChange=e.handleFanChange.bind(Object(l.a)(e)),e.handleFanTurnoffChange=e.handleFanTurnoffChange.bind(Object(l.a)(e)),e.errorClose=e.errorClose.bind(Object(l.a)(e)),e.save=e.save.bind(Object(l.a)(e)),e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("/api/settings/hardware").then((function(e){return e.json()})).then((function(t){e.setState({relayPin:t.relay_pin,fanPin:t.fan_pin,fanTurnoffTemp:t.fan_turnoff_temp})}))}},{key:"handleRelayChange",value:function(e){e.target.value===this.state.fanPin?this.setState({relayError:!0}):this.setState({relayPin:e.target.value,inputChanged:!0})}},{key:"handleFanChange",value:function(e){e.target.value===this.state.relayPin?this.setState({fanError:!0}):this.setState({fanPin:e.target.value,inputChanged:!0})}},{key:"handleFanTurnoffChange",value:function(e){e.target.value>=0&&this.setState({fanTurnoffTemp:e.target.value,inputChanged:!0})}},{key:"errorClose",value:function(){this.setState({relayError:!1,fanError:!1})}},{key:"save",value:function(){var e=this,t={};t.relay_pin=this.state.relayPin,t.fan_pin=this.state.fanPin,t.fan_turnoff_temp=this.state.fanTurnoffTemp,R.a.post("/api/settings/hardware",t).then((function(t){200===t.data.status&&e.setState({inputChanged:!1})}))}},{key:"render",value:function(){return Object(m.jsxs)(pe.a,{children:[Object(m.jsx)(fe.a,{expandIcon:Object(m.jsx)(me.a,{}),"aria-controls":"panel3bh-content",id:"panel3bh-header",children:Object(m.jsx)(M.a,{variant:"h6",children:"Hardware"})}),Object(m.jsxs)(Oe.a,{children:[Object(m.jsx)(ee.a,{open:this.state.relayError,autoHideDuration:5e3,onClose:this.errorClose,children:Object(m.jsx)(te.a,{elevation:6,variant:"filled",severity:"error",children:"Relay pin cannot be same as fan pin!"})}),Object(m.jsx)(ee.a,{open:this.state.fanError,autoHideDuration:5e3,onClose:this.errorClose,children:Object(m.jsx)(te.a,{elevation:6,variant:"filled",severity:"error",children:"Fan pin cannot be same as Relay pin!"})}),Object(m.jsxs)(D.a,{container:!0,spacing:3,children:[Object(m.jsx)(D.a,{item:!0,children:Object(m.jsxs)(Se.a,{children:[Object(m.jsx)(ke.a,{children:"Relay GPIO"}),Object(m.jsxs)(we.a,{value:this.state.relayPin,onChange:this.handleRelayChange,children:[Object(m.jsx)(Pe.a,{value:5,children:"5 (pin 29)"}),Object(m.jsx)(Pe.a,{value:6,children:"6 (pin 31)"}),Object(m.jsx)(Pe.a,{value:16,children:"16 (pin 36)"}),Object(m.jsx)(Pe.a,{value:17,children:"17 (pin 11)"}),Object(m.jsx)(Pe.a,{value:22,children:"22 (pin 15)"}),Object(m.jsx)(Pe.a,{value:23,children:"23 (pin 16)"}),Object(m.jsx)(Pe.a,{value:24,children:"24 (pin 18)"}),Object(m.jsx)(Pe.a,{value:25,children:"25 (pin 22)"}),Object(m.jsx)(Pe.a,{value:26,children:"26 (pin 37)"}),Object(m.jsx)(Pe.a,{value:27,children:"27 (pin 13)"})]})]})}),Object(m.jsx)(D.a,{item:!0,children:Object(m.jsxs)(Se.a,{children:[Object(m.jsx)(ke.a,{children:"Fan GPIO"}),Object(m.jsxs)(we.a,{value:this.state.fanPin,onChange:this.handleFanChange,children:[Object(m.jsx)(Pe.a,{value:5,children:"5 (pin 29)"}),Object(m.jsx)(Pe.a,{value:6,children:"6 (pin 31)"}),Object(m.jsx)(Pe.a,{value:16,children:"16 (pin 36)"}),Object(m.jsx)(Pe.a,{value:17,children:"17 (pin 11)"}),Object(m.jsx)(Pe.a,{value:22,children:"22 (pin 15)"}),Object(m.jsx)(Pe.a,{value:23,children:"23 (pin 16)"}),Object(m.jsx)(Pe.a,{value:24,children:"24 (pin 18)"}),Object(m.jsx)(Pe.a,{value:25,children:"25 (pin 22)"}),Object(m.jsx)(Pe.a,{value:26,children:"26 (pin 37)"}),Object(m.jsx)(Pe.a,{value:27,children:"27 (pin 13)"})]})]})}),Object(m.jsx)(D.a,{item:!0,children:Object(m.jsx)(ge.a,{variant:"outlined",type:"number",label:"Fan off temperature (\xb0C)",value:this.state.fanTurnoffTemp,onChange:this.handleFanTurnoffChange})}),Object(m.jsx)(D.a,{container:!0,justifyContent:"flex-end",spacing:3,children:Object(m.jsx)(D.a,{item:!0,children:Object(m.jsx)(S.a,{variant:"contained",color:"primary",disabled:!this.state.inputChanged,onClick:this.save,children:"Save"})})})]})]})]})}}]),a}(n.Component),Te=a(198),_e=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={darkMode:n.props.darkMode,primary:n.props.primary,secondary:n.props.secondary,inputChanged:!1},n.save=n.save.bind(Object(l.a)(n)),n.handleDarkSwitch=n.handleDarkSwitch.bind(Object(l.a)(n)),n.handlePrimaryChange=n.handlePrimaryChange.bind(Object(l.a)(n)),n.handleSecondaryChange=n.handleSecondaryChange.bind(Object(l.a)(n)),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){}},{key:"save",value:function(){var e=this,t={};t.dark_mode=this.state.darkMode,t.primary_color=this.state.primary,t.secondary_color=this.state.secondary,R.a.post("/api/settings/appearance",t).then((function(t){200===t.data.status&&e.setState({inputChanged:!1})}))}},{key:"handleDarkSwitch",value:function(e){this.setState({darkMode:e.target.checked,inputChanged:!0}),this.props.toggleDarkMode(e.target.checked)}},{key:"handlePrimaryChange",value:function(e,t){this.setState({primary:e.hex,inputChanged:!0}),this.props.setPrimaryColor(e.hex)}},{key:"handleSecondaryChange",value:function(e,t){this.setState({secondary:e.hex,inputChanged:!0}),this.props.setSecondaryColor(e.hex)}},{key:"render",value:function(){return Object(m.jsxs)(pe.a,{children:[Object(m.jsx)(fe.a,{expandIcon:Object(m.jsx)(me.a,{}),"aria-controls":"panel1bh-content",id:"panel1bh-header",children:Object(m.jsx)(M.a,{variant:"h6",children:"Appearance"})}),Object(m.jsx)(Oe.a,{children:Object(m.jsxs)(D.a,{container:!0,direction:"column",alignItems:"flex-start",spacing:3,children:[Object(m.jsxs)(D.a,{item:!0,children:[Object(m.jsx)(M.a,{align:"left",children:"Dark Mode"}),Object(m.jsx)(ve.a,{checked:this.state.darkMode,onChange:this.handleDarkSwitch,color:"primary"})]}),Object(m.jsxs)(D.a,{item:!0,children:[Object(m.jsx)(M.a,{align:"left",children:"Primary Color"}),Object(m.jsx)(Te.a,{color:this.state.primary,onChange:this.handlePrimaryChange})]}),Object(m.jsxs)(D.a,{item:!0,children:[Object(m.jsx)(M.a,{align:"left",children:"Secondary Color"}),Object(m.jsx)(Te.a,{color:this.state.secondary,onChange:this.handleSecondaryChange})]}),Object(m.jsxs)(D.a,{container:!0,justifyContent:"flex-end",spacing:3,children:[Object(m.jsx)(D.a,{item:!0,children:Object(m.jsxs)(D.a,{container:!0,direction:"column",alignItems:"center",children:[Object(m.jsx)(D.a,{item:!0,children:Object(m.jsx)(M.a,{variant:"caption",children:"If saved, theme will be applied to all new connections."})}),Object(m.jsx)(D.a,{item:!0,children:Object(m.jsx)(M.a,{variant:"caption",display:"inline",children:"(useful for differentiating between ovens)"})})]})}),Object(m.jsx)(D.a,{item:!0,children:Object(m.jsx)(S.a,{variant:"contained",color:"primary",disabled:!this.state.inputChanged,onClick:this.save,children:"Save"})})]})]})})]})}}]),a}(n.Component),Me=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){return Object(c.a)(this,a),t.call(this,e)}return Object(o.a)(a,[{key:"render",value:function(){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(je,{}),Object(m.jsxs)(w.a,{maxWidth:!1,style:{paddingTop:"20px"},children:[Object(m.jsx)(Ce,{}),Object(m.jsx)(De,{}),Object(m.jsx)(ye,{}),Object(m.jsx)(_e,{toggleDarkMode:this.props.toggleDarkMode,setPrimaryColor:this.props.setPrimaryColor,setSecondaryColor:this.props.setSecondaryColor,primary:this.props.primary,secondary:this.props.secondary,darkMode:this.props.darkMode})]})]})}}]),a}(n.Component),Ie=a(282),Le=a(31),Re=a(149),Ne=a.n(Re),Fe=a(281),Ee=a.n(Fe),We=a(284),Xe=a.n(We),Ye=a(280),Ae=a.n(Ye),ze=a(279),Be=a.n(ze),qe=a(278),He=a.n(qe),Ue=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(c.a)(this,a),(e=t.call(this)).SelectButton=Object(he.a)({root:{backgroundColor:"#00ba16","&:hover":{backgroundColor:"#009612"}}})(S.a),e.DeleteButton=Object(he.a)({root:{backgroundColor:"#bf0000","&:hover":{backgroundColor:"#870000"}}})(S.a),e.columns=[{field:"name",headerName:"Profile Name",width:300},{field:"last_run",headerName:"Last Loaded",type:"dateTime",width:200,editable:!1},{field:"date_created",headerName:"Date Created",type:"dateTime",width:200,editable:!1}];var n=!1;return"localhost"!==window.location.hostname&&"127.0.0.1"!==window.location.hostname&&""!==window.location.hostname||(n=!0),e.state={profiles:[],activeItem:"",dialog:!1,forceLoadDialog:!1,allowUploadDownload:!n,deleteDialog:!1},e.loadClicked=e.loadClicked.bind(Object(l.a)(e)),e.forceLoadClicked=e.forceLoadClicked.bind(Object(l.a)(e)),e.handleItemClick=e.handleItemClick.bind(Object(l.a)(e)),e.handleDialogClose=e.handleDialogClose.bind(Object(l.a)(e)),e.downloadProfile=e.downloadProfile.bind(Object(l.a)(e)),e.fileChanged=e.fileChanged.bind(Object(l.a)(e)),e.handleForceDialogClose=e.handleForceDialogClose.bind(Object(l.a)(e)),e.handleDeleteDialogClose=e.handleDeleteDialogClose.bind(Object(l.a)(e)),e.deleteClicked=e.deleteClicked.bind(Object(l.a)(e)),e.deleteProfile=e.deleteProfile.bind(Object(l.a)(e)),e}return Object(o.a)(a,[{key:"handleItemClick",value:function(e){this.setState({activeItem:e.row}),this.setState({dialog:!0})}},{key:"handleDialogClose",value:function(){this.setState({dialog:!1})}},{key:"handleForceDialogClose",value:function(){this.setState({forceLoadDialog:!1})}},{key:"handleDeleteDialogClose",value:function(){this.setState({deleteDialog:!1})}},{key:"componentDidMount",value:function(){this.getData()}},{key:"getData",value:function(){var e=this;fetch("/api/reflow_profiles/all").then((function(e){return e.json()})).then((function(t){t.forEach((function(e){e.id=e.name,e.date_created=new Date(e.date_created).toLocaleString(),0===e.last_run?e.last_run="never":e.last_run=new Date(e.last_run).toLocaleString()})),e.setState({profiles:t})}))}},{key:"loadClicked",value:function(){var e=this;R.a.post("/api/reflow_profiles/load",{profile_name:this.state.activeItem.name,force_load:!1}).then((function(t){if(200===t.data.status){var a=e.props.history;a&&a.push("/")}else 409===t.data.status&&(console.log("got 409"),e.setState({forceLoadDialog:!0}))}))}},{key:"forceLoadClicked",value:function(){var e=this;R.a.post("/api/reflow_profiles/load",{profile_name:this.state.activeItem.name,force_load:!0}).then((function(t){if(200===t.data.status){var a=e.props.history;a&&a.push("/")}}))}},{key:"downloadProfile",value:function(){var e=this.state.activeItem;e.date_created=Date.now(),e.last_run=0,delete e.id;var t=new Blob([JSON.stringify(e,null,3)],{type:"text/plain;charset=utf-8"});He.a.saveAs(t,e.name+".json")}},{key:"fileChanged",value:function(e){var t=this,a=new FileReader;a.readAsText(e.target.files[0],"UTF-8"),a.onload=function(e){var a=JSON.parse(e.target.result);R.a.post("/api/reflow_profiles/save",a).then((function(e){t.getData()}))}}},{key:"deleteProfile",value:function(){var e=this;R.a.post("/api/reflow_profiles/delete",{profile_name:this.state.activeItem.name}).then((function(t){e.getData(),e.setState({deleteDialog:!1,dialog:!1})}))}},{key:"deleteClicked",value:function(){this.setState({deleteDialog:!0})}},{key:"render",value:function(){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(je,{}),Object(m.jsxs)(ae.a,{onClose:this.handleDialogClose,open:this.state.dialog,fullWidth:!0,children:[Object(m.jsxs)(ne.a,{children:[this.state.activeItem.name,Object(m.jsx)(A.a,{"aria-label":"close",onClick:this.handleDialogClose,children:Object(m.jsx)($.a,{})})]}),Object(m.jsx)(ie.a,{children:Object(m.jsx)("div",{style:{width:"92%"},children:Object(m.jsx)(C,{draggable:!1,profile:this.state.activeItem,historicTemps:[]})})}),Object(m.jsx)(ue.a,{children:Object(m.jsxs)(D.a,{container:!0,justifyContent:"space-between",children:[Object(m.jsx)(D.a,{item:!0,children:Object(m.jsx)(this.DeleteButton,{startIcon:Object(m.jsx)(Be.a,{}),variant:"contained",color:"primary",onClick:this.deleteClicked,children:"Delete"})}),Object(m.jsx)(D.a,{item:!0,children:Object(m.jsxs)(D.a,{container:!0,spacing:2,children:[Object(m.jsx)(D.a,{item:!0,children:this.state.allowUploadDownload&&Object(m.jsx)(S.a,{startIcon:Object(m.jsx)(Ae.a,{}),variant:"contained",color:"primary",onClick:this.downloadProfile,children:"Download"})}),Object(m.jsx)(D.a,{item:!0,children:Object(m.jsx)(S.a,{component:I.b,to:{pathname:"/editProfile",state:{profile:this.state.activeItem}},startIcon:Object(m.jsx)(P.a,{}),variant:"contained",color:"primary",children:"Edit Profile"})}),Object(m.jsx)(D.a,{item:!0,children:Object(m.jsx)(this.SelectButton,{onClick:this.loadClicked,startIcon:Object(m.jsx)(Ee.a,{}),variant:"contained",color:"primary",children:"Load"})})]})})]})})]}),Object(m.jsxs)(ae.a,{open:this.state.forceLoadDialog,children:[Object(m.jsx)(ne.a,{children:"Oven Currently Running"}),Object(m.jsx)(ie.a,{children:"Stop oven and load profile?"}),Object(m.jsxs)(ue.a,{children:[Object(m.jsx)(S.a,{onClick:this.handleForceDialogClose,color:"primary",children:"Cancel"}),Object(m.jsx)(S.a,{onClick:this.forceLoadClicked,color:"primary",autoFocus:!0,children:"Force Load"})]})]}),Object(m.jsxs)(ae.a,{open:this.state.deleteDialog,children:[Object(m.jsx)(ne.a,{children:"Delete Profile"}),Object(m.jsxs)(ie.a,{children:["Are you sure you want to delete ","?"]}),Object(m.jsxs)(ue.a,{children:[Object(m.jsx)(S.a,{onClick:this.handleDeleteDialogClose,color:"primary",children:"Cancel"}),Object(m.jsx)(S.a,{onClick:this.deleteProfile,color:"primary",autoFocus:!0,children:"Delete"})]})]}),Object(m.jsx)(w.a,{maxWidth:!1,children:Object(m.jsx)(D.a,{container:!0,direction:"row",align:"center",justifyContent:"center",spacing:2,children:Object(m.jsx)(D.a,{item:!0,xs:12,md:8,lg:6,style:{paddingTop:"20px"},children:Object(m.jsx)(Ie.a,{rows:this.state.profiles,rowHeight:45,columns:this.columns,pageSize:5,checkboxSelection:!1,disableMultipleSelection:!0,onRowClick:this.handleItemClick,autoHeight:!0})})})}),Object(m.jsx)(w.a,{maxWidth:!1,children:Object(m.jsxs)(D.a,{container:!0,spacing:3,justifyContent:"flex-end",children:[Object(m.jsx)(D.a,{item:!0,children:Object(m.jsx)(S.a,{component:I.b,to:"/",startIcon:Object(m.jsx)(Ne.a,{}),variant:"contained",color:"primary",children:"Cancel"})}),this.state.allowUploadDownload&&Object(m.jsx)(D.a,{item:!0,children:Object(m.jsxs)(S.a,{startIcon:Object(m.jsx)(Xe.a,{}),variant:"contained",color:"primary",component:"label",children:["Upload",Object(m.jsx)("input",{type:"file",accept:"application/JSON",hidden:!0,onChange:this.fileChanged})]})}),Object(m.jsx)(D.a,{item:!0,children:Object(m.jsx)(S.a,{component:I.b,to:{pathname:"/editProfile",state:{profile:{name:"new_profile",date_created:Date.now(),last_run:0,datapoints:[{x:0,y:30},{x:75,y:30},{x:150,y:30},{x:225,y:30},{x:300,y:30},{x:375,y:30}]}}},startIcon:Object(m.jsx)(P.a,{}),variant:"contained",color:"primary",children:"Create New Profile"})})]})})]})}}]),a}(n.Component),Je=Object(Le.f)(Ue),Ge=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(je,{}),Object(m.jsx)(M.a,{variant:"h5",align:"center",children:"404. Hope you find your way back!"})]})}}]),a}(n.Component),Ke=a(90),Qe=a(574),Ve=a(576),Ze=a(572),$e=a(575),et=(a(506),a(285)),tt=a.n(et),at=a(290),nt=a.n(at),it=a(197),st=a.n(it),rt=a(196),ct=a.n(rt),ot=a(286),lt=a.n(ot),dt=a(289),ht=a.n(dt),jt=a(287),ut=a.n(jt),bt=a(288),pt=a.n(bt),Ot=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).layout={default:["1 2 3 4 5 6 7 8 9 0 - = {bksp}","q w e r t y u i o p [ ]"," a s d f g h j k l ; ' {enter}"," z x c v b n m , .  ","{space}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}",".com @ {space}"]},n.numpadLayout={default:["7 8 9","4 5 6","1 2 3","0 . {bksp}"]},n.numpadDisplay={"{bksp}":"del"},n.state={loadDialog:!1,forceLoadDialog:!1,enterNameDialog:!1,newName:n.props.location.state.profile.name,newDatapoints:n.props.location.state.profile.datapoints,newProfile:n.props.location.state.profile,currentX:n.props.location.state.profile.datapoints[0].x,currentY:n.props.location.state.profile.datapoints[0].y,maxTime:400,maxNodes:6,currentPoint:0},n.saveProfile=n.saveProfile.bind(Object(l.a)(n)),n.handleInputChange=n.handleInputChange.bind(Object(l.a)(n)),n.goBack=n.goBack.bind(Object(l.a)(n)),n.loadClicked=n.loadClicked.bind(Object(l.a)(n)),n.forceLoadClicked=n.forceLoadClicked.bind(Object(l.a)(n)),n.cancelClicked=n.cancelClicked.bind(Object(l.a)(n)),n.saveClicked=n.saveClicked.bind(Object(l.a)(n)),n.keyboardChange=n.keyboardChange.bind(Object(l.a)(n)),n.cancelEnterName=n.cancelEnterName.bind(Object(l.a)(n)),n.clearName=n.clearName.bind(Object(l.a)(n)),n.dragStart=n.dragStart.bind(Object(l.a)(n)),n.drag=n.drag.bind(Object(l.a)(n)),n.dragEnd=n.dragEnd.bind(Object(l.a)(n)),n.addX=n.addX.bind(Object(l.a)(n)),n.subtractX=n.subtractX.bind(Object(l.a)(n)),n.addY=n.addY.bind(Object(l.a)(n)),n.subtractY=n.subtractY.bind(Object(l.a)(n)),n.addTime=n.addTime.bind(Object(l.a)(n)),n.subtractTime=n.subtractTime.bind(Object(l.a)(n)),n.addNode=n.addNode.bind(Object(l.a)(n)),n.subtractNode=n.subtractNode.bind(Object(l.a)(n)),n}return Object(o.a)(a,[{key:"addX",value:function(){if(this.state.currentX<this.state.maxTime){var e=this.state.newProfile;e.datapoints[this.state.currentPoint].x+=1,this.setState({newProfile:e,currentX:this.state.currentX+1})}}},{key:"subtractX",value:function(){if(this.state.currentX>0){var e=this.state.newProfile;e.datapoints[this.state.currentPoint].x-=1,this.setState({newProfile:e,currentX:this.state.currentX-1})}}},{key:"addY",value:function(){if(this.state.currentY<300){var e=this.state.newProfile;e.datapoints[this.state.currentPoint].y+=1,this.setState({newProfile:e,currentY:this.state.currentY+1})}}},{key:"subtractY",value:function(){if(this.state.currentY>0){var e=this.state.newProfile;e.datapoints[this.state.currentPoint].y-=1,this.setState({newProfile:e,currentY:this.state.currentY-1})}}},{key:"addTime",value:function(){this.state.maxTime<2e3&&this.setState({maxTime:this.state.maxTime+100})}},{key:"subtractTime",value:function(){this.state.maxTime>0&&this.state.maxTime-100>=this.state.newProfile.datapoints[this.state.newProfile.datapoints.length-1].x&&this.setState({maxTime:this.state.maxTime-100})}},{key:"addNode",value:function(){if(this.state.newProfile.datapoints.length<10){var e=this.state.newProfile,t={};this.state.currentPoint===this.state.newProfile.datapoints.length-1?this.state.newProfile.datapoints[this.state.currentPoint].x<=this.state.maxTime-50?(t.x=e.datapoints[this.state.currentPoint].x+25,t.y=e.datapoints[this.state.currentPoint].y,e.datapoints.splice(this.state.currentPoint+1,0,t),this.setState({currentPoint:this.state.currentPoint+1,currentX:t.x,currentY:t.y})):(t.x=Math.floor((e.datapoints[this.state.currentPoint].x+e.datapoints[this.state.currentPoint-1].x)/2),t.y=Math.floor((e.datapoints[this.state.currentPoint].y+e.datapoints[this.state.currentPoint-1].y)/2),e.datapoints.splice(this.state.currentPoint,0,t),this.setState({currentX:t.x,currentY:t.y})):(t.x=Math.floor((e.datapoints[this.state.currentPoint].x+e.datapoints[this.state.currentPoint+1].x)/2),t.y=Math.floor((e.datapoints[this.state.currentPoint].y+e.datapoints[this.state.currentPoint+1].y)/2),e.datapoints.splice(this.state.currentPoint+1,0,t),this.setState({currentPoint:this.state.currentPoint+1,currentX:t.x,currentY:t.y})),this.setState({newProfile:e,maxNodes:this.state.maxNodes+1})}}},{key:"subtractNode",value:function(){if(this.state.newProfile.datapoints.length>2){var e=this.state.newProfile;0===this.state.currentPoint?(e.datapoints.splice(this.state.currentPoint,1),this.setState({currentX:this.state.newProfile.datapoints[this.state.currentPoint].x,currentY:this.state.newProfile.datapoints[this.state.currentPoint].y})):(e.datapoints.splice(this.state.currentPoint,1),this.setState({currentPoint:this.state.currentPoint-1,currentX:this.state.newProfile.datapoints[this.state.currentPoint-1].x,currentY:this.state.newProfile.datapoints[this.state.currentPoint-1].y})),this.setState({newProfile:e,maxNodes:this.state.maxNodes-1})}}},{key:"dragStart",value:function(e,t,a,n){this.setState({currentPoint:a})}},{key:"drag",value:function(e,t,a,n){var i=this.state.newProfile;i.datapoints[a]=n,this.setState({currentX:n.x,currentY:n.y,newProfile:i})}},{key:"dragEnd",value:function(e,t,a,n){var i=this.state.newProfile;i.datapoints[a]=n,this.setState({currentX:n.x,currentY:n.y,newProfile:i})}},{key:"handleInputChange",value:function(e){var t=this.state.newProfile;t.name=e.target.value,this.setState({newProfile:t})}},{key:"componentDidMount",value:function(){this.setState({maxTime:100*Math.ceil(this.state.newProfile.datapoints[this.state.newProfile.datapoints.length-1].x/100),maxNodes:this.state.newProfile.datapoints.length})}},{key:"goBack",value:function(){this.props.history.goBack()}},{key:"loadClicked",value:function(){var e=this;R.a.post("/api/reflow_profiles/load",{profile_name:this.state.newProfile.name,force_load:!1}).then((function(t){if(200===t.data.status){var a=e.props.history;a&&a.push("/")}else 409===t.data.status&&(e.setState({loadDialog:!1}),e.setState({forceLoadDialog:!0}))}))}},{key:"forceLoadClicked",value:function(){var e=this;R.a.post("/api/reflow_profiles/load",{profile_name:this.state.newProfile.name,force_load:!0}).then((function(t){if(200===t.data.status){var a=e.props.history;a&&a.push("/")}}))}},{key:"cancelClicked",value:function(){this.setState({loadDialog:!1,forceLoadDialog:!1})}},{key:"saveProfile",value:function(){var e=this;this.setState({enterNameDialog:!1});var t=this.state.newProfile;t.date_created=Date.now(),t.last_run=0,this.setState({newProfile:t}),R.a.post("/api/reflow_profiles/save",this.state.newProfile).then((function(t){e.setState({loadDialog:!0})}))}},{key:"saveClicked",value:function(){this.setState({enterNameDialog:!0})}},{key:"keyboardChange",value:function(e){if("{bksp}"===e)(t=this.state.newProfile).name=t.name.substring(0,t.name.length-1),this.setState({newProfile:t});else if("{space}"===e){(t=this.state.newProfile).name=t.name+" ",this.setState({newProfile:t})}else{var t;(t=this.state.newProfile).name=t.name+e,this.setState({newProfile:t})}}},{key:"cancelEnterName",value:function(){this.setState({enterNameDialog:!1})}},{key:"clearName",value:function(){var e=this.state.newProfile;e.name="",this.setState({newProfile:e})}},{key:"render",value:function(){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(je,{}),Object(m.jsxs)(ae.a,{open:this.state.loadDialog,onClose:this.cancelClicked,children:[Object(m.jsx)(ne.a,{children:"Profile saved"}),Object(m.jsx)(ie.a,{children:"Would you like to load the profile now?"}),Object(m.jsxs)(ue.a,{children:[Object(m.jsx)(S.a,{onClick:this.cancelClicked,color:"primary",variant:"outlined",children:"Don't Load"}),Object(m.jsx)(S.a,{onClick:this.loadClicked,color:"primary",variant:"outlined",autoFocus:!0,children:"Load"})]})]}),Object(m.jsxs)(ae.a,{open:this.state.forceLoadDialog,onClose:this.cancelClicked,children:[Object(m.jsx)(ne.a,{children:"Oven Currently Running"}),Object(m.jsx)(ie.a,{children:"Stop oven and load profile?"}),Object(m.jsxs)(ue.a,{children:[Object(m.jsx)(S.a,{onClick:this.cancelClicked,color:"primary",variant:"outlined",children:"Cancel"}),Object(m.jsx)(S.a,{onClick:this.forceLoadClicked,color:"primary",variant:"outlined",autoFocus:!0,children:"Force Load"})]})]}),Object(m.jsxs)(ae.a,{open:this.state.enterNameDialog,maxWidth:"md",fullWidth:!1,onClose:this.cancelClicked,children:[Object(m.jsx)(ne.a,{children:"Name your profile:"}),Object(m.jsx)(ie.a,{children:Object(m.jsx)(Ze.a,{onChange:this.handleInputChange,label:"Profile Name",value:this.state.newProfile.name,endAdornment:Object(m.jsx)($e.a,{position:"end",children:Object(m.jsx)(A.a,{onClick:this.clearName,children:Object(m.jsx)(tt.a,{})})})})}),Object(m.jsxs)(ue.a,{children:[Object(m.jsx)(S.a,{onClick:this.cancelEnterName,color:"primary",variant:"outlined",children:"Cancel"}),Object(m.jsx)(S.a,{onClick:this.saveProfile,color:"primary",variant:"contained",autoFocus:!0,children:"OK"})]})]}),Object(m.jsx)(w.a,{maxWidth:!1,children:Object(m.jsxs)(D.a,{container:!0,children:[Object(m.jsx)(D.a,{item:!0,sm:2,lg:2,children:Object(m.jsxs)(D.a,{container:!0,spacing:1,direction:"column",style:{paddingTop:"20px"},children:[Object(m.jsx)(D.a,{item:!0,align:"center",children:Object(m.jsxs)(M.a,{variant:"subtitle1",children:["Current Point: ",this.state.currentPoint+1]})}),Object(m.jsx)(D.a,{item:!0,children:Object(m.jsxs)(_.a,{children:[Object(m.jsx)(D.a,{item:!0,align:"center",children:Object(m.jsx)(M.a,{variant:"subtitle1",children:"Edit Point"})}),Object(m.jsx)(D.a,{item:!0,align:"center",children:Object(m.jsx)(A.a,{color:"primary",size:"small",onClick:this.addY,children:Object(m.jsx)(lt.a,{})})}),Object(m.jsx)(D.a,{item:!0,children:Object(m.jsxs)(D.a,{container:!0,justifyContent:"space-between",wrap:"nowrap",children:[Object(m.jsx)(D.a,{item:!0,children:Object(m.jsx)(A.a,{color:"primary",size:"small",onClick:this.subtractX,children:Object(m.jsx)(ut.a,{})})}),Object(m.jsx)(D.a,{item:!0,align:"center",style:{minWidth:90},children:Object(m.jsxs)(M.a,{variant:"h6",noWrap:!0,children:[this.state.currentX,", ",this.state.currentY]})}),Object(m.jsx)(D.a,{item:!0,children:Object(m.jsx)(A.a,{color:"primary",size:"small",onClick:this.addX,children:Object(m.jsx)(pt.a,{})})})]})}),Object(m.jsx)(D.a,{item:!0,align:"center",children:Object(m.jsx)(A.a,{color:"primary",size:"small",onClick:this.subtractY,children:Object(m.jsx)(ht.a,{})})})]})}),Object(m.jsx)(D.a,{item:!0,children:Object(m.jsxs)(_.a,{children:[Object(m.jsx)(D.a,{item:!0,align:"center",children:Object(m.jsx)(M.a,{variant:"subtitle1",children:"Nodes"})}),Object(m.jsxs)(D.a,{container:!0,spacing:1,justifyContent:"space-between",children:[Object(m.jsx)(D.a,{item:!0,children:Object(m.jsx)(A.a,{color:"primary",size:"small",onClick:this.subtractNode,children:Object(m.jsx)(ct.a,{})})}),Object(m.jsx)(D.a,{item:!0,align:"center",children:Object(m.jsx)(M.a,{variant:"h6",children:this.state.maxNodes})}),Object(m.jsx)(D.a,{item:!0,children:Object(m.jsx)(A.a,{color:"primary",size:"small",onClick:this.addNode,children:Object(m.jsx)(st.a,{})})})]})]})}),Object(m.jsx)(D.a,{item:!0,children:Object(m.jsxs)(_.a,{children:[Object(m.jsx)(D.a,{item:!0,align:"center",children:Object(m.jsx)(M.a,{variant:"subtitle1",children:"Max Time"})}),Object(m.jsxs)(D.a,{container:!0,spacing:1,justifyContent:"space-between",children:[Object(m.jsx)(D.a,{item:!0,children:Object(m.jsx)(A.a,{color:"primary",size:"small",onClick:this.subtractTime,children:Object(m.jsx)(ct.a,{})})}),Object(m.jsx)(D.a,{item:!0,align:"center",children:Object(m.jsx)(M.a,{variant:"h6",children:this.state.maxTime})}),Object(m.jsx)(D.a,{item:!0,children:Object(m.jsx)(A.a,{color:"primary",size:"small",onClick:this.addTime,children:Object(m.jsx)(st.a,{})})})]})]})})]})}),Object(m.jsx)(D.a,{item:!0,sm:10,children:Object(m.jsx)("div",{style:{paddingTop:"20px",width:"94%",marginLeft:"auto"},children:Object(m.jsx)(C,{draggable:!0,profile:this.state.newProfile,dragStart:this.dragStart,drag:this.drag,dragEnd:this.dragEnd,maxTime:this.state.maxTime,activePoint:this.state.currentPoint})})})]})}),Object(m.jsx)(w.a,{maxWidth:!1,children:Object(m.jsxs)(D.a,{container:!0,spacing:3,alignItems:"center",justifyContent:"space-between",style:{paddingTop:"15px"},children:[Object(m.jsx)(D.a,{item:!0,xs:6,children:Object(m.jsx)(_.a,{style:{padding:"6px 7px 6px 10px"},children:Object(m.jsxs)(M.a,{children:["Profile: ",this.state.newProfile.name]})})}),Object(m.jsx)(D.a,{item:!0,children:Object(m.jsxs)(D.a,{container:!0,spacing:3,children:[Object(m.jsx)(D.a,{item:!0,children:Object(m.jsx)(S.a,{onClick:this.goBack,startIcon:Object(m.jsx)(Ne.a,{}),variant:"contained",color:"primary",children:"Cancel"})}),Object(m.jsx)(D.a,{item:!0,children:Object(m.jsx)(S.a,{onClick:this.saveClicked,startIcon:Object(m.jsx)(nt.a,{}),variant:"contained",color:"primary",children:"Save"})})]})})]})})]})}}]),a}(n.Component),ft=Object(Le.f)(Ot),xt=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={darkMode:!0,primary:"#3f51b5",secondary:"#e91e63"},n.toggleDarkMode=n.toggleDarkMode.bind(Object(l.a)(n)),n.setPrimaryColor=n.setPrimaryColor.bind(Object(l.a)(n)),n.setSecondaryColor=n.setSecondaryColor.bind(Object(l.a)(n)),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("/api/settings/appearance").then((function(e){return e.json()})).then((function(t){e.setState({darkMode:t.dark_mode,primary:t.primary_color,secondary:t.secondary_color})}))}},{key:"componentWillUnmount",value:function(){u.disconnect()}},{key:"toggleDarkMode",value:function(e){e?this.setState({darkMode:!0}):this.setState({darkMode:!1})}},{key:"setPrimaryColor",value:function(e){this.setState({primary:e})}},{key:"setSecondaryColor",value:function(e){this.setState({secondary:e})}},{key:"render",value:function(){var e="dark";this.state.darkMode||(e="light");var t=Object(Ke.b)({palette:{type:e,primary:{main:this.state.primary},secondary:{main:this.state.secondary}}});return Object(m.jsxs)(Qe.a,{theme:t,children:[Object(m.jsx)(Ve.a,{}),Object(m.jsx)(I.a,{children:Object(m.jsx)(b.Provider,{value:u,children:Object(m.jsxs)(Le.c,{children:[Object(m.jsx)(Le.a,{exact:!0,path:"/",children:Object(m.jsx)(be,{})}),Object(m.jsx)(Le.a,{path:"/editProfile",children:Object(m.jsx)(ft,{})}),Object(m.jsx)(Le.a,{path:"/profileList",children:Object(m.jsx)(Je,{})}),Object(m.jsx)(Le.a,{path:"/settings",children:Object(m.jsx)(Me,{toggleDarkMode:this.toggleDarkMode,setPrimaryColor:this.setPrimaryColor,setSecondaryColor:this.setSecondaryColor,primary:this.state.primary,secondary:this.state.secondary,darkMode:this.state.darkMode})}),Object(m.jsx)(Le.a,{component:Ge})]})})})]})}}]),a}(n.Component),mt=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,586)).then((function(t){var a=t.getCLS,n=t.getFID,i=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),n(e),i(e),s(e),r(e)}))},gt=!1;"localhost"!==window.location.hostname&&"127.0.0.1"!==window.location.hostname&&""!==window.location.hostname||(gt=!0),r.a.render(Object(m.jsx)(i.a.StrictMode,{children:Object(m.jsx)(xt,{isLocal:gt})}),document.getElementById("root")),mt()}},[[507,1,2]]]);
//# sourceMappingURL=main.921d146a.chunk.js.map